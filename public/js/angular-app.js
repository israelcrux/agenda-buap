$(document).ready(function(){var n=$("body"),e=$(".scrollable");e.on({mouseenter:function(){n.addClass("noscroll")},mouseleave:function(){n.removeClass("noscroll")}})}),function(){function n(n,e,o){for(var c=[],u=[],i=new Date(n,e-1,1),l=i.getDay(),s=l;s>0;s--)u.push({disabled:!0});for(var s=0,d=l;s<o.length;s++,d=(d+1)%7){o[s].ttag=r[d],o[s].ntag=s+1;for(var h=o[s].activities.length-1;h>=0;h--)o[s].activities[h].description.length>220&&(o[s].activities[h].long_description=!0),o[s].activities[h].croppedDescription=_.str.prune(o[s].activities[h].description,220),o[s].activities[h].time=t(o[s].activities[h].time);c.push(o[s])}return{days:c,dummies:u,name:a[e],year:n,monthIndex:e-1}}function e(n){return 10>n?"0"+n:n}function t(n){var e="0"==n.charAt(0)?1:0;return n.substring(e,n.length-3)+" hrs"}var r=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],a=["","Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],o=angular.module("dci",["cfp.hotkeys"]).config(function(n){n.includeCheatSheet=!1});o.factory("DataService",["$http",function(t){return{calendar:function(r,a){return t.get(window.ROOT_PATH+"/calendar/"+r+"-"+e(a)).then(function(e){return n(r,a,e.data)},function(){console.log("Could not load calendar!")})}}}]),o.controller("CalendarController",["$scope","$http","hotkeys","DataService",function(n,e,t,r){function a(e,t){n.allMonths[t+"-"+e]?n.currentMonth=n.allMonths[t+"-"+e]:(n.currentMonth=r.calendar(e,t),n.currentMonth.then(function(r){n.currentMonth=r,n.allMonths[t+"-"+e]=r}))}n.costs=["Entrada libre","Evento con Costo"],n.mode="month",n.currentWeek={name:"Del 2 al 8 de Noviembre",days:[]};var o=new Date,c=o.getDate(),u=1*o.getMonth()+1,i=o.getFullYear();console.log("Displaying:"+i+"-"+u+" : "+c),n.currentYear=i,n.currentMonthIndex=u-1,n.currentDayIndex=c-1,n.allMonths={},a(i,u),n.currentDay={},n.calendarStatusClass="",n.nextMonth=function(){11==n.currentMonthIndex?(n.currentYear+=1,n.currentMonthIndex=0):n.currentMonthIndex+=1,a(n.currentYear,n.currentMonthIndex+1)},n.prevMonth=function(){0==n.currentMonthIndex?(n.currentYear-=1,n.currentMonthIndex=11):n.currentMonthIndex-=1,a(n.currentYear,n.currentMonthIndex+1)},n.mainView=function(){n.calendarStatusClass="",n.currentDay={}},n.dayView=function(e,t){e.disabled||(n.calendarStatusClass="ar-dayview",n.currentDay=e,n.currentDayIndex=t,$("#ar-collapsable-menu").removeClass("in").removeClass("collapsing").addClass("collapse"))},t.bindTo(n).add({combo:"right",callback:function(e){var t=n.currentDayIndex;t=(t+1)%n.currentMonth.days.length,n.currentDay=n.currentMonth.days[t],n.currentDayIndex=t,e.stopPropagation(),e.preventDefault()}}).add({combo:"left",callback:function(e){var t=n.currentDayIndex;--t<0&&(t=n.currentMonth.days.length-1),n.currentDay=n.currentMonth.days[t],n.currentDayIndex=t,e.stopPropagation(),e.preventDefault()}}).add({combo:"down",callback:function(e){if(n.currentDay.activities&&""==n.calendarStatusClass){var t=n.currentDayIndex+7;t<n.currentMonth.days.length&&(n.currentDay=n.currentMonth.days[t],n.currentDayIndex=t),e.stopPropagation(),e.preventDefault()}else"ar-dayview"==n.calendarStatusClass&&(e.stopPropagation(),e.preventDefault())}}).add({combo:"up",callback:function(e){if(n.currentDay.activities){var t=n.currentDayIndex-7;t>=0&&(n.currentDay=n.currentMonth.days[t],n.currentDayIndex=t),e.stopPropagation(),e.preventDefault()}}}).add({combo:"enter",callback:function(){n.currentDayIndex&&""==n.calendarStatusClass&&n.dayView(n.currentDay,n.currentDayIndex)}}).add({combo:"esc",callback:function(){n.mainView()}})}])}();